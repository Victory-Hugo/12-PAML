# PAML v10最新版安装教程

## **版本说明**
声明：如下仓库非官方仓库。但是官方仓库在编译的时候存在一些声明问题。我修改了这些声明。具体如下：

`baseml.c`:
```c
原始：memset(com.spname, 0, NS * sizeof(char));
修改：
memset(com.spname, 0, sizeof(com.spname));
// 或
memset(com.spname, 0, NS * sizeof(com.spname[0]));
```

`mcmctree.c`：
```c
原始：int ProcessNodeAnnotation();
修改：int ProcessNodeAnnotation(int* haslabel);
```
## **克隆仓库**
我已经修改了上述内容，通过如下方式获取：
```bash
git clone https://github.com/Victory-Hugo/12-PAML.git
```

* 这一步会从 GitHub 上下载 PAML 的源代码到当前目录下的 `paml` 文件夹。
* `paml` 是 Phylogenetic Analysis by Maximum Likelihood（基于最大似然的系统发育分析）工具集。

---

## **删除已有的可执行文件**

```bash
cd /12-PAML/linux # 进入PAML目录
rm -rf ./bin # 删除已有的可执行文件
```

* 我们会自己在 Linux 下编译对应的可执行文件。

---

## **进入源码目录并编译**

```bash
cd src
make -f Makefile
```

* `src` 目录包含所有 C 源码文件和 `Makefile`（编译规则）。
* `make -f Makefile` 会调用 GCC（或系统默认 C 编译器）按 `Makefile` 里的规则生成可执行文件。
* 编译完成后，`src` 目录会生成多个二进制文件，比如 `baseml`, `codeml` 等。

---

## **检查编译结果**

```bash
ls -lF
```

* 这个命令会列出编译完成后的文件，方便确认所有目标文件都生成了。

---

## **删除中间文件**

```bash
rm *.o
```

* `.o` 文件是编译过程中的目标文件（中间产物），编译完成后可以删除，保持目录整洁。

---

## **创建 bin 目录**

```bash
mkdir ../bin
```

* PAML 习惯把可执行文件放在 `bin` 目录中，方便统一管理和调用。

---

## **移动可执行文件到 bin**

```bash
mv baseml basemlg chi2 codeml evolver infinitesites mcmctree pamp yn00 ../bin
```

* 这一步会把刚才编译生成的 9 个核心程序移动到 `../bin`（也就是 paml/bin）目录下。
* 这些程序分别对应不同的功能模块：

  * `baseml` / `basemlg`：碱基替换模型的最大似然估计
  * `chi2`：卡方检验工具
  * `codeml`：密码子模型分析
  * `evolver`：模拟序列进化
  * `infinitesites`：无限位点模型模拟
  * `mcmctree`：贝叶斯 MCMC 时间估计
  * `pamp`：祖先序列重建
  * `yn00`：dN/dS 计算（Yang & Nielsen 方法）

---

## **测试是否安装成功**

```bash
PAML/bin/baseml
PAML/bin/codeml
PAML/bin/evolver
```

* 执行这些命令时，如果显示程序的帮助信息（或提示缺少控制文件 `.ctl`），说明编译成功。
* 为了方便使用，可以将 `bin` 目录添加到系统环境变量 `$PATH` 中：

```bash
export PATH=$PWD/bin:$PATH
```
>我不建议这样做，因为PAML一运行就会在当前目录下拉屎。
---

### **完整一键安装脚本（Linux）**

如果你想一次跑完，可以直接在 `paml` 父目录下执行：

```bash
git clone https://github.com/Victory-Hugo/12-PAML.git
cd paml/linux
rm -f bin/*.exe
cd src
make -f Makefile
rm -f *.o
mkdir -p ../bin
mv baseml basemlg chi2 codeml evolver infinitesites mcmctree pamp yn00 ../bin
../bin/baseml
../bin/codeml
../bin/evolver
```

