## **1. 克隆仓库**

```bash
git clone https://github.com/abacus-gene/paml.git
```

* 这一步会从 GitHub 上下载 PAML 的源代码到当前目录下的 `paml` 文件夹。
* `paml` 是 Phylogenetic Analysis by Maximum Likelihood（基于最大似然的系统发育分析）工具集。

---

## **2. 删除 Windows 可执行文件**

```bash
cd /mnt/f/OneDrive/文档（科研）/脚本/Download/12-PAML
rm -rf ./bin
```

* 因为 Linux 下不能直接运行 `.exe`（Windows 可执行文件），这里先把它们删掉，避免混淆。
* 我们会自己在 Linux 下编译对应的可执行文件。

---

## **3. 进入源码目录并编译**

```bash
cd src
make -f Makefile
```

* `src` 目录包含所有 C 源码文件和 `Makefile`（编译规则）。
* `make -f Makefile` 会调用 GCC（或系统默认 C 编译器）按 `Makefile` 里的规则生成可执行文件。
* 编译完成后，`src` 目录会生成多个二进制文件，比如 `baseml`, `codeml` 等。

---

## **4. 检查编译结果**

```bash
ls -lF
```

* 这个命令会列出编译完成后的文件，方便确认所有目标文件都生成了。

---

## **5. 删除中间文件**

```bash
rm *.o
```

* `.o` 文件是编译过程中的目标文件（中间产物），编译完成后可以删除，保持目录整洁。

---

## **6. 创建 bin 目录**

```bash
mkdir ../bin
```

* PAML 习惯把可执行文件放在 `bin` 目录中，方便统一管理和调用。

---

## **7. 移动可执行文件到 bin**

```bash
mv baseml basemlg chi2 codeml evolver infinitesites mcmctree pamp yn00 ../bin
```

* 这一步会把刚才编译生成的 9 个核心程序移动到 `../bin`（也就是 paml/bin）目录下。
* 这些程序分别对应不同的功能模块：

  * `baseml` / `basemlg`：碱基替换模型的最大似然估计
  * `chi2`：卡方检验工具
  * `codeml`：密码子模型分析
  * `evolver`：模拟序列进化
  * `infinitesites`：无限位点模型模拟
  * `mcmctree`：贝叶斯 MCMC 时间估计
  * `pamp`：祖先序列重建
  * `yn00`：dN/dS 计算（Yang & Nielsen 方法）

---

## **8. 测试是否安装成功**

```bash
bin/baseml
bin/codeml
bin/evolver
```

* 执行这些命令时，如果显示程序的帮助信息（或提示缺少控制文件 `.ctl`），说明编译成功。
* 如果报错找不到文件，说明 `bin` 路径没加到 `$PATH`，可以这样加：

```bash
export PATH=$PWD/bin:$PATH
```

---

### **完整一键安装脚本（Linux）**

如果你想一次跑完，可以直接在 `paml` 父目录下执行：

```bash
git clone https://github.com/abacus-gene/paml.git
cd paml
rm -f bin/*.exe
cd src
make -f Makefile
rm -f *.o
mkdir -p ../bin
mv baseml basemlg chi2 codeml evolver infinitesites mcmctree pamp yn00 ../bin
../bin/baseml
../bin/codeml
../bin/evolver
```

